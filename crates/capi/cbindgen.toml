# SPDX-FileCopyrightText: Copyright 2025 Au-Zone Technologies
# SPDX-License-Identifier: Apache-2.0
#
# cbindgen configuration for generating C headers from Rust FFI

language = "C"
autogen_warning = "/* WARNING: This file is auto-generated by cbindgen. Do not modify. */"
include_version = true
documentation = true
documentation_style = "doxy"
documentation_length = "full"

header = """
#ifndef EDGEFIRST_HAL_H
#define EDGEFIRST_HAL_H

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @file hal.h
 * @brief EdgeFirst HAL C API
 *
 * SPDX-License-Identifier: Apache-2.0
 * Copyright (c) 2025 Au-Zone Technologies. All Rights Reserved.
 *
 * C API for EdgeFirst Hardware Abstraction Layer providing:
 * - Zero-copy tensor operations with DMA/SHM support
 * - Hardware-accelerated image processing (G2D, OpenGL, CPU)
 * - ML model output decoding (YOLO, ModelPack)
 * - Multi-object tracking (ByteTrack)
 *
 * @section error_handling Error Handling
 * Functions returning int: 0 on success, -1 on error (errno set)
 * Functions returning pointers: valid pointer on success, NULL on error (errno set)
 *
 * @section memory_management Memory Management
 * - hal_*_new() functions transfer ownership to caller (must call hal_*_free())
 * - hal_*_get_*() functions returning pointers are borrowed (valid during parent lifetime)
 * - hal_*_clone_fd() creates new owned fd (caller must close())
 * - hal_*_from_fd() takes ownership of fd (caller must NOT close())
 *
 * @section thread_safety Thread Safety
 * - All functions are thread-safe unless documented otherwise
 * - Tensor map operations require external synchronization when used concurrently
 */
"""

trailer = """
#ifdef __cplusplus
}
#endif

#endif /* EDGEFIRST_HAL_H */
"""

includes = ["stdint.h", "stddef.h", "stdbool.h"]
sys_includes = []
no_includes = false

[export]
include = []
exclude = []
item_types = ["enums", "structs", "unions", "typedefs", "opaque", "functions", "constants"]

[export.rename]
"HalDtype" = "hal_dtype"
"HalTensorMemory" = "hal_tensor_memory"
"HalFourcc" = "hal_fourcc"
"HalRotation" = "hal_rotation"
"HalFlip" = "hal_flip"
"HalNms" = "hal_nms"
"HalRect" = "hal_rect"
"HalCrop" = "hal_crop"
"HalQuantization" = "hal_quantization"
"HalDetectBox" = "hal_detect_box"
"HalTrackInfo" = "hal_track_info"
"HalTensor" = "hal_tensor"
"HalTensorImage" = "hal_tensor_image"
"HalImageProcessor" = "hal_image_processor"
"HalDecoderBuilder" = "hal_decoder_builder"
"HalDecoder" = "hal_decoder"
"HalDetectBoxList" = "hal_detect_box_list"
"HalSegmentationList" = "hal_segmentation_list"
"HalByteTrack" = "hal_bytetrack"
"HalTrackInfoList" = "hal_track_info_list"
"HalTensorMap" = "hal_tensor_map"

[enum]
rename_variants = "ScreamingSnakeCase"
prefix_with_name = true

[struct]
rename_fields = "SnakeCase"

[fn]
rename_args = "SnakeCase"
args = "auto"
sort_by = "None"

[parse]
parse_deps = false
clean = false
